docker.enabled = true

params {
  input = "${projectDir}/assets/genomes.csv"
  output = "results"
  publish_dir_mode = 'copy'

  igenomes_base = 's3://ngi-igenomes/igenomes'
}

profiles {
    test_data {
        includeConfig 'conf/test_data.config'

        params.fasta = params.test_data['sarscov2']['genome']['genome_fasta']
        params.gtf = params.test_data['sarscov2']['genome']['genome_gtf']
  cloud {
    params.input = "${projectDir}/assets/genomes.csv"
    process {
      publishDir = [
        path: { "${params.outdir}/${workflow.revision}" },
        mode: params.publish_dir_mode,
        saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
      ]
    }
  }
}


process {
  publishDir = [
    path: { "${params.outdir}/${workflow.commitId}" },
    mode: params.publish_dir_mode,
    saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
  ]
}

plugins {
  id 'nf-validation'
}
